<!DOCTYPE HTML>
<html lang="ja">
<title>Japan Precipitation</title>

<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
    <meta charset="UTF-8" name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta property="og:title" content="Japan Precipitation" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://japan-precipitation.netlify.app/images/ogp.png" />
    <meta name="description" content="気象庁のAMEDAS降水量をDeck glのhexagonレイヤーを用いて可視化するアプリケーションです。ゲリラ豪雨など、降水量を調べたい時に役に立ちます。" />
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Japan Precipitation" />
    <meta name="twitter:image" content="https://japan-precipitation.netlify.app/images/ogp.png" />
    <meta name="author" content="仁志">
    <meta name="keywords" content="アメダス,amedas,気象庁,deckgl,hexagon,可視化" />
    <link rel="apple-touch-icon" href="./images/apple-touch-icon.png">
    <link rel="icon" href="./images/apple-touch-icon.png">
    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/all.min.js"
        integrity="sha512-GWzVrcGlo0TxTRvz9ttioyYJ+Wwk9Ck0G81D+eO63BaqHaJ3YZX9wuqjwgfcV/MrB2PhaVX9DkYVhbFpStnqpQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

    <style>
        .header {
            position: fixed;
            width: 100%;
            z-index: 1;
            background: #0095d9;
            color: #ffffff;
        }

        .update {
            position: fixed;
            top: 60px;
            right: 5px;
        }

        .btn-menu {
            position: fixed;
            top: 10px;
            right: 5px;
            border: 1px solid #ffffff;
            background: transparent;
            color: #ffffff;
            padding: .5rem;
            font-size: 1rem;
            cursor: pointer;
            line-height: 1;
            border-radius: .3em;
        }

        nav {
            background: rgba(0, 110, 84, 0.8);
            position: absolute;
            top: 3.5rem;
            z-index: 9;
            right: 0;
            text-align: center;
            width: 100%;
            transition: .5s;
            display: none;
        }

        nav li {
            height: 50px;
            line-height: 50px;
            cursor: pointer;
            border-bottom: 1px dotted #fff;
        }

        nav li:last-child {
            border: none;
        }

        nav li:hover {
            background: rgba(56, 180, 139, .8);
        }

        .main {
            width: 100%;
            height: 100%;
            z-index: 0;
            position: absolute;
        }

        iframe {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            border: none;
            position: absolute;
            z-index: 0;
        }

        .fb_share {
            position: fixed;
            bottom: 53px;
            left: 3px;
        }

        .footer {
            position: fixed;
            width: 100%;
            bottom: 0;
            z-index: 1;
            background: #0095d9;
            color: #ffffff;
        }
    </style>

    <script type="module">

        /* 初期画面 */
        const main = document.querySelector('.main');
        main.innerHTML = '<iframe src="./3h.html"></iframe>';

        /* Last Update */
        const res = await fetch("./data/lastupdate.json");
        const update_date = await res.json();

        console.log(update_date[0].lastupdate);

        const up_date = document.querySelector('.update');

        up_date.innerHTML = "データ更新日時：" + update_date[0].lastupdate;

        /* ナビゲーション表示 */
        const btn = document.querySelector('.btn-menu');
        const nav = document.querySelector('nav');

        btn.addEventListener('click', () => {
            nav.style.display = "block";
            $('#navi').toggle();
        });

        /* map切り替え */
        const map_1h = document.querySelector('.map-1h');
        const map_3h = document.querySelector('.map-3h');
        const map_6h = document.querySelector('.map-6h');
        const map_12h = document.querySelector('.map-12h');
        const map_24h = document.querySelector('.map-24h');

        map_1h.addEventListener('click', () => {
            main.innerHTML = '<iframe src="./1h.html"></iframe>';
            $('#navi').toggle();
        });

        map_3h.addEventListener('click', () => {
            main.innerHTML = '<iframe src="./3h.html"></iframe>';
            $('#navi').toggle();
        });

        map_6h.addEventListener('click', () => {
            main.innerHTML = '<iframe src="./6h.html"></iframe>';
            $('#navi').toggle();
        });

        map_12h.addEventListener('click', () => {
            main.innerHTML = '<iframe src="./12h.html"></iframe>';
            $('#navi').toggle();
        });

        map_24h.addEventListener('click', () => {
            main.innerHTML = '<iframe src="./24h.html"></iframe>';
            $('#navi').toggle();
        });


    </script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MPP84V2NHB"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-MPP84V2NHB');
    </script>

    <link rel="manifest" href="./manifest.json">
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./service-worker.js').then(function () {
                console.log('Service Worker Registered');
            });
        }
    </script>

</head>

<body>

    <div class="header text-center py-3">
        <h1 class="text-2xl">Japan Precipitation</h1>

        <button class="btn-menu">MENU</button>
        <div id="navi">
            <nav>
                <ul>
                    <li class="map-1h">1時間 降雨量</li>
                    <li class="map-3h">3時間 降雨量</li>
                    <li class="map-6h">6時間 降雨量</li>
                    <li class="map-12h">12時間 降雨量</li>
                    <li class="map-24h">24時間 降雨量</li>
                </ul>
            </nav>
        </div>

        <div class="update text-xs"></div>

    </div>

    <div class="main">

    </div>

    <div class="fb_share">

        <div class="fb-like" data-href="https://japan-precipitation.netlify.app/" data-width=""
            data-layout="button_count" data-action="like" data-size="small" data-share="true"></div>

    </div>

    <div class="footer text-center pt-2">
        <div class="grid gap-4 grid-cols-3 grid-rows-1">
            <a href="./index.html">
                <div><i class="fa-solid fa-house"></i> ホーム</div>
            </a>
            <div class="manual-btn"><i class="fa-solid fa-book-open"></i> 使い方</div>
            <div class="share-btn"><i class="fa-solid fa-comments"></i> シェア</div>
        </div>

        <span class="text-xs">src on GitHub. &copy 齋藤　仁志</span>
    </div>

    <!-- Facebookシェアボタン -->
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/ja_JP/sdk.js#xfbml=1&version=v16.0"
        nonce="eVvix2r0"></script>

</body>

</html>